                                                                        Table "public.farmers"
       Column        |            Type             | Collation | Nullable |               Default               | Storage  | Compression | Stats target | Description 
---------------------+-----------------------------+-----------+----------+-------------------------------------+----------+-------------+--------------+-------------
 id                  | integer                     |           | not null | nextval('farmers_id_seq'::regclass) | plain    |             |              | 
 phone               | character varying(20)       |           | not null |                                     | extended |             |              | 
 name                | character varying(100)      |           | not null |                                     | extended |             |              | 
 email               | character varying(255)      |           |          |                                     | extended |             |              | 
 password_hash       | character varying(255)      |           |          |                                     | extended |             |              | 
 password_salt       | character varying(64)       |           |          |                                     | extended |             |              | 
 region              | character varying(50)       |           |          |                                     | extended |             |              | 
 county              | character varying(50)       |           |          |                                     | extended |             |              | 
 language            | character varying(5)        |           | not null |                                     | extended |             |              | 
 sms_enabled         | boolean                     |           | not null |                                     | plain    |             |              | 
 registration_source | character varying(20)       |           | not null |                                     | extended |             |              | 
 is_admin            | boolean                     |           | not null |                                     | plain    |             |              | 
 active              | boolean                     |           | not null |                                     | plain    |             |              | 
 location_lat        | double precision            |           |          |                                     | plain    |             |              | 
 location_lon        | double precision            |           |          |                                     | plain    |             |              | 
 crops               | jsonb                       |           |          |                                     | extended |             |              | 
 farm_size           | double precision            |           |          |                                     | plain    |             |              | 
 alert_count         | integer                     |           | not null |                                     | plain    |             |              | 
 last_login          | timestamp without time zone |           |          |                                     | plain    |             |              | 
 last_alert          | timestamp without time zone |           |          |                                     | plain    |             |              | 
 created_at          | timestamp with time zone    |           | not null | now()                               | plain    |             |              | 
 updated_at          | timestamp with time zone    |           | not null | now()                               | plain    |             |              | 
 sub_county          | character varying(100)      |           |          |                                     | extended |             |              | 
 user_type           | character varying(20)       |           |          | 'farmer'::character varying         | extended |             |              | 
 display_id          | character varying(20)       |           |          |                                     | extended |             |              | 
 avatar_url          | character varying(500)      |           |          |                                     | extended |             |              | 
Indexes:
    "farmers_pkey" PRIMARY KEY, btree (id)
    "farmers_display_id_key" UNIQUE CONSTRAINT, btree (display_id)
    "ix_farmers_active" btree (active)
    "ix_farmers_county" btree (county)
    "ix_farmers_display_id" btree (display_id)
    "ix_farmers_phone" UNIQUE, btree (phone)
    "ix_farmers_region" btree (region)
    "ix_farmers_sub_county" btree (sub_county)
    "ix_farmers_user_type" btree (user_type)
Referenced by:
    TABLE "agrovet_orders" CONSTRAINT "agrovet_orders_agrovet_id_fkey" FOREIGN KEY (agrovet_id) REFERENCES farmers(id)
    TABLE "agrovet_orders" CONSTRAINT "agrovet_orders_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "agrovet_products" CONSTRAINT "agrovet_products_agrovet_id_fkey" FOREIGN KEY (agrovet_id) REFERENCES farmers(id)
    TABLE "agrovet_profiles" CONSTRAINT "agrovet_profiles_user_id_fkey" FOREIGN KEY (user_id) REFERENCES farmers(id) ON DELETE CASCADE
    TABLE "alerts" CONSTRAINT "alerts_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "buyer_profiles" CONSTRAINT "buyer_profiles_user_id_fkey" FOREIGN KEY (user_id) REFERENCES farmers(id) ON DELETE CASCADE
    TABLE "chat_history" CONSTRAINT "chat_history_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "conversations" CONSTRAINT "conversations_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "crop_images" CONSTRAINT "crop_images_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "farms" CONSTRAINT "farms_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "iot_devices" CONSTRAINT "iot_devices_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "marketplace_bids" CONSTRAINT "marketplace_bids_buyer_id_fkey" FOREIGN KEY (buyer_id) REFERENCES farmers(id)
    TABLE "marketplace_listings" CONSTRAINT "marketplace_listings_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
    TABLE "transactions" CONSTRAINT "transactions_buyer_id_fkey" FOREIGN KEY (buyer_id) REFERENCES farmers(id)
    TABLE "transactions" CONSTRAINT "transactions_seller_id_fkey" FOREIGN KEY (seller_id) REFERENCES farmers(id)
    TABLE "user_sessions" CONSTRAINT "user_sessions_farmer_id_fkey" FOREIGN KEY (farmer_id) REFERENCES farmers(id)
Access method: heap

